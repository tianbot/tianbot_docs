# tianrover使用手册

## 产品简介

Tianrover是天之博特TOM全向自主移动机器人平台系列之一，是一款主要面向科研教育行业的高性能开源全向移动底盘，提供开源控制程序、开发文档，支持使用USB、CAN、UART等作为外部通信接口，可灵活使用打造自己独特的机器人方案。

底盘模块采用高性能移动底盘解决方案，动力系统为大疆小型AGV移动底盘解决方案，电机与减速器完美匹配，提供强劲动力与丰富的智能保护，经过上万小时高强度测试，久经考验，是机器人比赛、科研教育、自动化设备等领域的理想之选，适用于10-50Kg重量级的机器人移动平台和执行机构，可广泛应用于AGV、仓储、物流搬运、机器人研发等领域。

拓展模块是在底盘基础上安装的一个拓展平台，可搭载外部控制器（如MiniPC、妙算等）、传感器（如摄像头、激光雷达等）、执行器（机械臂、夹爪等），利于科研教育对各种接口的需求。

![image-20231102140540973](https://tianbot-pic.oss-cn-beijing.aliyuncs.com/tianbot-pic/Tianbot-Doc202311021406719.png)

## **适用场景**

* 高校，机器人实验室
* 快速搭建算法验证、深度学习的应用部署平台、减少开发周期和研发成本
* ROS机器人教学研发、自动控制实验、机械工程实验、机器人比赛、人工智能实验室

## 产品功能

- **建图与导航**
  通过运行ROS机器人操作系统生态中的gmapping建图算法功能包、movebase路径规划功能包、amcl机器人定位功能包，可实现建立当前所在的环境地图，并根据指定的导航点，自主规划行动路径，并驱动车体抵达目标点，完成从地图构建到自主导航的功能，提供action动作的实现（actionlib包），即给定一个世界系下的目标位置，机器人会试图移动到该位置。另外，move_base节点中包含了两个代价地图（全局、局部），以及一个全局规划器和一个局部规划器，以便实现导航任务。

- **决策与规划**
  作为一个复杂软硬件结合系统，其安全可靠运行需要车载硬件、传感器集成、感知预测，以及控制规划多个模块的协同配合工作。最关键的部分是感知预测和决策控制规划的紧密配合。狭义上的决策规划控制部分，包含了行为决策（behavior Decision)、动作规划（Motion Planning）、以及反馈控制（Feedback Control）这三个模块。

- **障碍物检测识别**
  障碍物检测包括基于激光雷达点数据的障碍物检测识别、基于毫米波雷达数据的障碍物检测识别以及基于两种传感器的障碍物结果融合，典型应用为基于激光雷达点数据的障碍物检测识别，通过线下训练的卷积神经网络模型、学习点云特征并预测障碍物的相关属性（比如前景物体 概率、相对于物体中心的偏移量、物体高度等），并根据这些属性进行障碍物分割。

**以上功能根据配置不同，支持功能不同，更多产品详情咨询TIANBOT销售人员**。

## 硬件系统

### 硬件架构
整体硬件电路系统采用标准通信方式，其整机电路拓扑图如下：
![](https://tianbot-pic.oss-cn-beijing.aliyuncs.com/tianbot-pic/Tianbot-Doc%E5%9B%BE%E7%89%876.png)

### 接口介绍

![](https://tianbot-pic.oss-cn-beijing.aliyuncs.com/tianbot-pic/Tianbot-Doc%E5%9B%BE%E7%89%877.png)

1. 总电源：长按总电源，听到滴声提示音后松手整车供电、点按显示当前电量；
2. 电量显示：多彩数码管进行电池电量显示；
3. 蜂鸣器：开机启动、关机、电量低时发出提示音；
4. 充电指示灯：
- 绿色呼吸灯为正在充电
- 蓝色常亮为电量充满、
- 红色慢闪为充电电压错误
- 红色快闪为电源故障需检查
5. 充电接口：使用25.2V3A锂电池充电器充电、不可反接、短接！
6. 硬盘快拆面板：拆下此面板后可拆下上位机硬盘；
7. HMDI接口：输出上位机运行画面；
8. 上位机开机按钮：按下后上位机开机；（默认上位机开机不自启）
9. USB接口：USB3.0接口，直接连接在上位机上；
10. 外部供电接口：为挂搭载设备提供输出24V3A电源；
11. 急停开关：按下后整车执行电机断电，但不影响上位机供电。


## 软件系统
整个软件系统包含驱动模块，功能模块和算法模块，以增强平台的可移植性，提高开发的效率。

### 软件架构
整体架构如下图所示

![](https://tianbot-pic.oss-cn-beijing.aliyuncs.com/tianbot-pic/Tianbot-Doc%E5%9B%BE%E7%89%878.png)

底层计算平台为TIANBOT控制器，主控芯片为STM32，主要完成实时各种任务：
- 以编码器或IMU为反馈的闭环控制任务
- 传感器信息的采集、预处理与转发，如里程计等

车载运算设备扮演着上层计算平台的角色，负责较大运算量的各种算法执行：
- 环境感知，包括实时定位、建图、目标检测、识别和追踪
- 运动规划，包括全局规划（路径规划），局部规划（轨迹规划）

两个运算平台之间通过串口以规定的开源协议进行通信，平台同时提供了基于ROS的API接口，可以在ROS中利用C++或Python编程，进行二次开发。基于这个接口，开发者可以控制机器人底盘运动。更高级的应用中，用户可定义自己的协议，以扩展机器人的功能。

## **产品参数**

| 类型     | <div style="width:290px"> Tianrover_mini </div> | 
| :---: | :---: |
| 材质               | 铝合金、不锈钢、碳纤维          |
| 底盘尺寸(长*宽*高) | 790 * 705 * 480mm                   |
| 整车质量           | 29kg                            |
| 额定载荷           | 30Kg                            |
| 驱动方式           | 六轮独立驱动 六轮独立同步转向   |
| 动力系统           | 直流减速伺服系统                |
| 悬挂方式           | 双侧联动自适应悬挂系统          |
| 移动速度           | 小于 10Km/h                     |
| 最大爬坡           | <40°或 20cm                     |
| 越障能力           | 台阶、非结构废墟地形等地形      |
| 控制方式           | CAN、RS485、DBUS、串口等        |
| 工作电压           | 24V / 12V                       |
| 工作时间           | >5小时                          |
| 充电器             | AC 220V  DC 25.2V               |
| 充电时间           | 7H                              |
| 其它接口           | UART、PWM、USB、IIC、SPI、CAN等 |
| 其它配件           | 充电器、ROS2GO、线材包等        |

- 整车控制器 STM32F4 
- 运算平台: Jeston xavier NX
- 激光雷达: Livox mid360
- 深度相机: ZED2i

**以上功能根据配置不同，支持功能不同，更多产品详情咨询TIANBOT销售人员**。